#### 关于gc

* gc root枚举
    * 全局性引用(常量或者静态属性)与执行上下文作为起点
    * 保证一致性 需要stop the world
    * 类加载和编译过程中特定位置会创建OopMap，通过OopMap数据结构来存储引用指针
    * 并不是所有改动都会生成OopMap
    * 为了保证空间使用最小化，使用安全点(safePoint), 一般是方法调用、循环跳转、异常跳转指令才会产生safePoint
    * 采用主动中断的方式让所有线程到安全点，主要方式为设置一个flag, 线程主动轮询, flag状态变换则线程自行挂起，
    hotspot虚拟机会使用test指令生成轮询指令
    * 安全区域，进入安全区域需要等待根节点枚举结束或者gc结束才能走出安全区域
    
* 垃圾回收(GC)
    * 垃圾回收器
        * Serial、SerialOld
        * ParNew(新生代)
        * Parallel Scavenge、Parallel Old
        * CMS(老年代)
        * G1(横跨新、老年代)
        
* CMS垃圾回收器
    * 初始标记(STW)
    * 并发标记
    * 重新标记(STW)
    * 并发清除
    
* CMS的缺点
    * 浮动垃圾
    * 内存不规整
    * 对cpu资源敏感，因为是并发标记和清理，线程切换成本，
    如果cpu个数比较少是会占用cpu时间影响整体吞吐
    
* G1
    * 